# ğŸŒ 4You Broadband - Complete ISP Management System

A comprehensive web-based management system for Internet Service Providers with separate portals for Admins, Customers, and Field Engineers.

## âœ¨ Features

### ğŸ‘¨â€ğŸ’¼ Admin Portal
- Complete user management (CRUD operations)
- Broadband plan management
- Field engineer management
- Billing & payment tracking with full audit trail
- Automated email & WhatsApp notifications
- PDF invoice/receipt generation
- Excel export for reports
- Real-time dashboard with statistics

### ğŸ‘¤ Customer Portal
- View current plan details & expiry
- Online bill payment (UPI/Card/NetBanking simulation)
- Download invoices as PDF
- Complete billing history
- Account status tracking
- Mobile-responsive design

### ğŸ”§ Engineer Portal
- New customer onboarding with KYC
- Photo & document upload (Aadhaar/ID)
- Installation task management
- Status tracking (Pending â†’ Scheduled â†’ Completed)
- Mobile-optimized interface

## ğŸš€ Quick Start

### Prerequisites
- Python 3.8 or higher
- Node.js 16 or higher
- pip & npm

### Installation

**1. Clone/Download the project:**
```bash
cd 4you_broadband_complete
```

**2. Run automated setup:**
```bash
python setup.py
```

This script will:
- Install all Python dependencies
- Generate secure SECRET_KEY and ADMIN_PASSWORD
- Run database migrations
- Install frontend dependencies for all 3 portals
- Create necessary directories

**3. Configure email (optional but recommended):**

Edit `backend/.env`:
```env
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-16-char-app-password
EMAIL_ENABLED=true
```

Get Gmail App Password: https://myaccount.google.com/apppasswords

**4. Start all services:**

Linux/Mac:
```bash
./start.sh
```

Windows:
```batch
start.bat
```

Or manually start each service in separate terminals:
```bash
# Terminal 1 - Backend
cd backend && python app.py

# Terminal 2 - Admin Portal
cd admin-portal && npm run dev

# Terminal 3 - Customer Portal
cd customer-portal && npm run dev

# Terminal 4 - Engineer Portal
cd engineer-portal && npm run dev
```

## ğŸŒ Access URLs

| Service | URL | Purpose |
|---------|-----|---------|
| **Backend API** | http://localhost:8000 | REST API Server |
| **API Docs** | http://localhost:8000/docs | Interactive API Documentation |
| **Admin Portal** | http://localhost:5173 | Admin Management Dashboard |
| **Customer Portal** | http://localhost:5174 | Customer Self-Service |
| **Engineer Portal** | http://localhost:5175 | Field Engineer Tools |

## ğŸ” Default Credentials

### Admin Portal
- **Email:** admin@4you.in
- **Password:** *Check `backend/.env` file after running setup*

### Customer Portal
- Create customers via Admin Portal first
- Login with mobile number + password set by admin

### Engineer Portal
- Create engineers via Admin Portal first
- Login with mobile number + password set by admin

## ğŸ“ Project Structure
```
4you_broadband_complete/
â”œâ”€â”€ backend/              # FastAPI Backend (Python)
â”‚   â”œâ”€â”€ app.py           # Main application
â”‚   â”œâ”€â”€ models.py        # Database models
â”‚   â”œâ”€â”€ schemas.py       # Pydantic schemas
â”‚   â”œâ”€â”€ auth.py          # JWT authentication
â”‚   â”œâ”€â”€ *_routes.py      # API endpoints
â”‚   â”œâ”€â”€ *_service.py     # Business logic
â”‚   â””â”€â”€ .env             # Configuration (generated)
â”‚
â”œâ”€â”€ admin-portal/         # Admin UI (React + Vite)
â”‚   â””â”€â”€ src/App.jsx      # 3500+ lines complete admin UI
â”‚
â”œâ”€â”€ customer-portal/      # Customer UI (React + Vite)
â”‚   â””â”€â”€ src/App.jsx      # Integrated customer portal
â”‚
â”œâ”€â”€ engineer-portal/      # Engineer UI (React + Vite)
â”‚   â””â”€â”€ src/App.jsx      # Integrated engineer portal
â”‚
â”œâ”€â”€ setup.py             # One-command installation
â”œâ”€â”€ validate_setup.py    # Configuration validator
â”œâ”€â”€ start.sh / start.bat # Quick start scripts
â””â”€â”€ README.md            # This file
```

## âš™ï¸ Configuration

All configuration is in `backend/.env`:
```env
# Security
SECRET_KEY=<auto-generated-on-setup>
ADMIN_PASSWORD=<auto-generated-on-setup>
ACCESS_TOKEN_EXPIRE_MINUTES=60

# Email (optional)
EMAIL_ENABLED=true
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# WhatsApp (optional)
WHATSAPP_ENABLED=false
TWILIO_ENABLED=false

# File Limits
MAX_PHOTO_SIZE=5242880      # 5MB
MAX_DOCUMENT_SIZE=10485760  # 10MB
```

## ğŸ”„ Automated Tasks

The system runs these tasks automatically:

- **12:05 AM** - Check expired plans, reset payment status to Pending
- **2:00 AM** - Daily database backup
- **10:00 AM** - Send email/WhatsApp notifications for:
  - Plans expiring tomorrow
  - Payment due tomorrow
  - Expired plans

## ğŸ§ª Testing
```bash
cd backend
pytest tests/ -v --cov
```

## ğŸ“Š Database

**Development:** SQLite (automatic, no setup needed)  
**Production:** PostgreSQL (recommended)

Switch to PostgreSQL by updating `.env`:
```env
DATABASE_URL=postgresql://user:password@localhost:5432/isp_db
```

## ğŸ”’ Security Features

- âœ… JWT authentication with role-based access
- âœ… Rate limiting (5 login attempts/min, 10 payments/hour)
- âœ… Token expiration (60 minutes default)
- âœ… Input validation on all forms
- âœ… File size limits enforced
- âœ… CORS protection
- âœ… SQL injection prevention (SQLAlchemy ORM)

## ğŸ“± WhatsApp Integration (Optional)

### Option 1: Twilio (Recommended for beginners)
1. Sign up at https://www.twilio.com
2. Get WhatsApp sandbox credentials
3. Update `.env`:
```env
TWILIO_ENABLED=true
TWILIO_ACCOUNT_SID=<your-sid>
TWILIO_AUTH_TOKEN=<your-token>
```

### Option 2: WhatsApp Business API
1. Sign up at https://business.facebook.com
2. Create WhatsApp Business account
3. Update `.env`:
```env
WHATSAPP_ENABLED=true
WHATSAPP_PHONE_ID=<your-phone-id>
WHATSAPP_TOKEN=<your-token>
```

## ğŸ› Troubleshooting

**Backend won't start:**
```bash
# Check if port 8000 is in use
lsof -i :8000  # Mac/Linux
netstat -ano | findstr :8000  # Windows

# Validate configuration
python validate_setup.py
```

**Email not sending:**
```bash
cd backend
python
>>> from email_service import test_email_configuration
>>> test_email_configuration()
```

**CORS errors:**
- Verify frontend URLs in `backend/.env`
- Clear browser cache
- Check browser console for detailed error

## ğŸš€ Production Deployment

See `DEPLOYMENT.md` for detailed production deployment guide.

**Quick checklist:**
- [ ] Change `SECRET_KEY` to secure random value
- [ ] Change `ADMIN_PASSWORD` to strong password
- [ ] Switch to PostgreSQL database
- [ ] Configure production SMTP (SendGrid/AWS SES)
- [ ] Enable HTTPS/SSL
- [ ] Set up monitoring (Sentry/DataDog)
- [ ] Configure automated backups
- [ ] Update CORS URLs for production domains

## ğŸ“ˆ Tech Stack

**Backend:**
- FastAPI (Python web framework)
- SQLAlchemy (ORM)
- JWT (Authentication)
- APScheduler (Automated tasks)
- ReportLab (PDF generation)
- Pandas (Excel export)

**Frontend:**
- React 18
- Vite (Build tool)
- Tailwind CSS (Styling)
- Axios (API calls)
- Lucide React (Icons)

**Database:**
- SQLite (Development)
- PostgreSQL (Production)

## ğŸ¤ Support

**Issues:** Check `backend/logs/app.log` for detailed error logs  
**API Docs:** http://localhost:8000/docs  
**Email:** support@4you.in

## ğŸ“ License

MIT License - See LICENSE file for details

## ğŸ¯ Roadmap

- [ ] Mobile apps (React Native)
- [ ] Payment gateway integration (Razorpay)
- [ ] Advanced analytics dashboard
- [ ] Multi-language support
- [ ] Network monitoring tools
- [ ] Customer referral system

---

**Made with â¤ï¸ for ISP Management**

For detailed documentation, see the `/docs` folder.